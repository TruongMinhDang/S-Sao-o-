runtime: nodejs20
build:
  - npm install
  - npm run build --prefix apps/web
  # Dòng này debug tốt, giữ lại
  - ls -R .next || echo "Check path"

# Entrypoint này ĐÚNG
entrypoint: node .next/standalone/apps/web/server.js

env:
  # --- PHẦN SẾP ĐANG THIẾU (CỰC KỲ QUAN TRỌNG) ---
  # Không có 2 dòng này là Web không chạy được trên Google
  - variable: HOSTNAME
    value: "0.0.0.0"
  - variable: PORT
    value: "8080"
  # -----------------------------------------------

  - variable: APP_SOSAODO_ID
    secret: firebase-project-id
  - variable: APP_SOSAODO_EMAIL
    secret: FIREBASE_CLIENT_EMAIL
  - variable: APP_SOSAODO_KEY
    secret: FIREBASE_PRIVATE_KEY

runConfig:
  cpu: 1
  memoryMiB: 1024
