runtime: nodejs20
build:
  - npm install
  - npm run build --prefix apps/web
  # Dòng này để debug: Nếu lỗi, mở log xem file nó đang nằm ở đâu
  - ls -R .next || echo "Không thấy thư mục .next ở gốc"

# Đường dẫn này khớp 100% với distDir: '../../.next'
entrypoint: node .next/standalone/apps/web/server.js

env:
  - variable: APP_SOSAODO_ID
    secret: firebase-project-id
  - variable: APP_SOSAODO_EMAIL
    secret: FIREBASE_CLIENT_EMAIL
  - variable: APP_SOSAODO_KEY
    secret: FIREBASE_PRIVATE_KEY

runConfig:
  cpu: 1
  memoryMiB: 1024