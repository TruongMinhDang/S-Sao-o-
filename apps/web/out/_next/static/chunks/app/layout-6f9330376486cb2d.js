(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8105:function(e,t,a){Promise.resolve().then(a.bind(a,227))},227:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n=a(7573),r=a(9438),s=a.n(r);a(2625);var l=a(6553),i=a(1695),o=a(8146),d=a(607),c=a(1449),u=a(7487),f=a(713),m=a(7985),h=a(5915),p=a(5980),x=a(2490),g=a(3634);let b={dashboard:c.Z,users:u.Z,star:f.Z,trophy:m.Z,rules:h.Z,bell:p.Z,admin:x.Z,profile:g.Z},y=[{href:"/tong-quan",label:"Tổng quan",icon:"dashboard"},{href:"/ghi-nhan",label:"Ghi nhận",icon:"star"},{href:"/lop-cua-toi",label:"Lớp của t\xf4i",icon:"users"},{href:"/bang-xep-hang",label:"Bảng xếp hạng",icon:"trophy"},{href:"/hoc-sinh",label:"Học sinh",icon:"users"},{href:"/rules",label:"Quy định",icon:"rules"},{href:"/nguoi-dung",label:"Người d\xf9ng",icon:"users",requireAdmin:!0},{href:"/quan-tri",label:"Quản trị",icon:"admin",requireAdmin:!0}];function v(){let e=(0,i.usePathname)(),{isAdmin:t}=(0,l.a)(),a=y.filter(e=>!e.requireAdmin||t);return(0,n.jsx)("aside",{className:"hidden w-64 flex-col border-r bg-gray-100/40 p-4 dark:bg-gray-800/40 md:flex",children:(0,n.jsxs)("nav",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h2",{className:"mb-2 text-lg font-semibold tracking-tight",children:"Điều hướng"}),a.map(t=>{let{href:a,label:r,icon:s}=t,l=b[s],i=null==e?void 0:e.startsWith(a),c=l?(0,n.jsx)(l,{className:(0,d.Z)("h-4 w-4 transition-transform",i&&"scale-110")}):(0,n.jsx)("span",{className:"h-4 w-4 rounded-sm bg-gray-400"});return(0,n.jsxs)(o.default,{href:a,className:(0,d.Z)("group relative flex items-center gap-3 rounded-lg px-3 py-2 transition-all",i?"text-white":"text-gray-700 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,n.jsx)("span",{className:(0,d.Z)("absolute inset-0 -z-10 rounded-lg opacity-0 blur-[1px] transition-opacity","bg-gradient-to-r from-[#ff7a18] via-[#ff9a44] to-[#ffd17a]",i&&"opacity-100")}),c,(0,n.jsx)("span",{className:(0,d.Z)("transition-all",i&&"animate-pulse"),children:r})]},a)})]})})}var N=a(7653),j=a(6108),w=a(9147);let k=N.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(j.fC,{ref:t,className:(0,w.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});k.displayName=j.fC.displayName,N.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(j.Ee,{ref:t,className:(0,w.cn)("aspect-square h-full w-full",a),...r})}).displayName=j.Ee.displayName;let Z=N.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(j.NY,{ref:t,className:(0,w.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});Z.displayName=j.NY.displayName;var R=a(466),q=a(735),C=a(7447),z=a(8),A=a(4379);let _=q.fC,E=q.xz,P=q.ZA;q.Uv,q.Tr,q.Ee,N.forwardRef((e,t)=>{let{className:a,inset:r,children:s,...l}=e;return(0,n.jsxs)(q.fF,{ref:t,className:(0,w.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...l,children:[s,(0,n.jsx)(C.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=q.fF.displayName,N.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(q.tu,{ref:t,className:(0,w.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=q.tu.displayName;let S=N.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...s}=e;return(0,n.jsx)(q.Uv,{children:(0,n.jsx)(q.VY,{ref:t,sideOffset:r,className:(0,w.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})})});S.displayName=q.VY.displayName;let F=N.forwardRef((e,t)=>{let{className:a,inset:r,...s}=e;return(0,n.jsx)(q.ck,{ref:t,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",a),...s})});F.displayName=q.ck.displayName,N.forwardRef((e,t)=>{let{className:a,children:r,checked:s,...l}=e;return(0,n.jsxs)(q.oC,{ref:t,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...l,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(q.wU,{children:(0,n.jsx)(z.Z,{className:"h-4 w-4"})})}),r]})}).displayName=q.oC.displayName,N.forwardRef((e,t)=>{let{className:a,children:r,...s}=e;return(0,n.jsxs)(q.Rk,{ref:t,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(q.wU,{children:(0,n.jsx)(A.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=q.Rk.displayName;let I=N.forwardRef((e,t)=>{let{className:a,inset:r,...s}=e;return(0,n.jsx)(q.__,{ref:t,className:(0,w.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...s})});I.displayName=q.__.displayName;let T=N.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(q.Z0,{ref:t,className:(0,w.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});T.displayName=q.Z0.displayName;var U=a(7312),B=a(4250),H=a(1523),Y=a(9546);let K=(0,H.v0)(Y.l);function O(){let e=(0,i.useRouter)(),{user:t,userProfile:a}=(0,l.a)(),r=async()=>{try{await (0,H.w7)(K),e.push("/login")}catch(e){console.error("Lỗi đăng xuất:",e)}};if(!t)return null;let s=(null==a?void 0:a.displayName)||t.displayName||"User",o=(null==a?void 0:a.email)||t.email||"",d=s.charAt(0).toUpperCase();return(0,n.jsxs)(_,{children:[(0,n.jsx)(E,{asChild:!0,children:(0,n.jsx)(R.z,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:(0,n.jsx)(k,{className:"h-8 w-8",children:(0,n.jsx)(Z,{children:d})})})}),(0,n.jsxs)(S,{className:"w-56",align:"end",forceMount:!0,children:[(0,n.jsx)(I,{className:"font-normal",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("p",{className:"text-sm font-medium leading-none",children:s}),(0,n.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:o})]})}),(0,n.jsx)(T,{}),(0,n.jsx)(P,{children:(0,n.jsxs)(F,{onClick:()=>e.push("/ho-so"),children:[(0,n.jsx)(U.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Hồ sơ của t\xf4i"})]})}),(0,n.jsx)(T,{}),(0,n.jsxs)(F,{onClick:r,children:[(0,n.jsx)(B.Z,{className:"mr-2 h-4 w-4"}),(0,n.jsx)("span",{children:"Đăng xuất"})]})]})]})}function G(e){let{children:t}=e,a=(0,i.usePathname)(),r=(0,i.useRouter)(),{user:s,loading:o}=(0,l.a)(),d="/login"===a;return((0,N.useEffect)(()=>{!o&&(s||d||r.push("/login"),s&&d&&r.push("/tong-quan"))},[s,d,o,r]),o||d)?(0,n.jsx)("main",{children:t}):s?(0,n.jsxs)("div",{className:"flex min-h-screen bg-gray-50/50",children:[(0,n.jsx)(v,{}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,n.jsx)("header",{className:"flex h-14 items-center justify-end gap-4 border-b bg-white px-6",children:(0,n.jsx)(O,{})}),(0,n.jsx)("main",{className:"flex-1 p-4 md:p-6",children:t}),(0,n.jsx)("footer",{className:"border-t p-3 text-center text-xs text-muted-foreground",children:"Sản phẩm chuyển đổi số của Li\xean Đội Trần Quang Khải — Bản quyền 2025 của Trương Minh Đăng, ph\xe1t triển tr\xean nền Firebase Studio"})]})]}):null}function L(e){let{children:t}=e;return(0,n.jsx)("html",{lang:"vi",suppressHydrationWarning:!0,children:(0,n.jsx)("body",{className:s().className,children:(0,n.jsx)(l.H,{children:(0,n.jsx)(G,{children:t})})})})}},466:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var n=a(7573),r=a(7653),s=a(8828),l=a(9289),i=a(9147);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:r,size:l,className:a})),ref:t,...c})});d.displayName="Button"},6553:function(e,t,a){"use strict";a.d(t,{H:function(){return o},a:function(){return d}});var n=a(7573),r=a(7653),s=a(1523),l=a(9546);let i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[u,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,s.v0)(l.l),t=(0,s.Aj)(e,async e=>{if(o(e),e){var t,a;let n=(await e.getIdTokenResult(!0)).claims;c({displayName:null!==(t=e.displayName)&&void 0!==t?t:void 0,email:null!==(a=e.email)&&void 0!==a?a:void 0,role:n.role})}else c(null);f(!1)});return()=>t()},[]);let m=(null==d?void 0:d.role)==="admin";return(0,n.jsx)(i.Provider,{value:{user:a,userProfile:d,isAdmin:m,loading:u},children:t})}function d(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9546:function(e,t,a){"use strict";a.d(t,{I:function(){return o},db:function(){return i},l:function(){return l}});var n=a(8531),r=a(6228),s=a(1523);let l=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAqGxdFqDGXOiiKP5cKFvPkNkmTdY4aByw",authDomain:"app-quan-ly-hs.firebaseapp.com",projectId:"app-quan-ly-hs",storageBucket:"app-quan-ly-hs.firebasestorage.app",messagingSenderId:"771200825229",appId:"1:771200825229:web:bdffe0944b21edff21afc4"}),i=(0,r.ad)(l),o=(0,s.v0)(l)},9147:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var n=a(607),r=a(5579);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}},2625:function(){}},function(e){e.O(0,[31,415,5,460,549,143,703,146,928,293,528,744],function(){return e(e.s=8105)}),_N_E=e.O()}]);