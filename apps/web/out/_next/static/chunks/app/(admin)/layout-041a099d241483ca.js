(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{3397:function(e,t,n){Promise.resolve().then(n.bind(n,9719))},9719:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var u=n(7573),r=n(7653),a=n(1695),i=n(6553);function s(e){let{children:t}=e,{user:n,loading:s,isAdmin:l}=(0,i.a)(),o=(0,a.useRouter)();return((0,r.useEffect)(()=>{if(!s){if(!n){o.replace("/login");return}l||o.replace("/")}},[n,s,l,o]),s)?(0,u.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,u.jsx)("p",{className:"text-sm text-muted-foreground",children:"Đang kiểm tra quyền truy cập..."})}):n&&l?(0,u.jsx)(u.Fragment,{children:t}):null}},6553:function(e,t,n){"use strict";n.d(t,{H:function(){return l},a:function(){return o}});var u=n(7573),r=n(7653),a=n(1523),i=n(9546);let s=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[f,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=(0,a.v0)(i.l),t=(0,a.Aj)(e,async e=>{if(l(e),e){var t,n;let u=(await e.getIdTokenResult(!0)).claims;c({displayName:null!==(t=e.displayName)&&void 0!==t?t:void 0,email:null!==(n=e.email)&&void 0!==n?n:void 0,role:u.role})}else c(null);d(!1)});return()=>t()},[]);let p=(null==o?void 0:o.role)==="admin";return(0,u.jsx)(s.Provider,{value:{user:n,userProfile:o,isAdmin:p,loading:f},children:t})}function o(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9546:function(e,t,n){"use strict";n.d(t,{I:function(){return l},db:function(){return s},l:function(){return i}});var u=n(8531),r=n(6228),a=n(1523);let i=(0,u.C6)().length?(0,u.Mq)():(0,u.ZF)({apiKey:"AIzaSyAqGxdFqDGXOiiKP5cKFvPkNkmTdY4aByw",authDomain:"app-quan-ly-hs.firebaseapp.com",projectId:"app-quan-ly-hs",storageBucket:"app-quan-ly-hs.firebasestorage.app",messagingSenderId:"771200825229",appId:"1:771200825229:web:bdffe0944b21edff21afc4"}),s=(0,r.ad)(i),l=(0,a.v0)(i)},1695:function(e,t,n){"use strict";var u=n(1219);n.o(u,"usePathname")&&n.d(t,{usePathname:function(){return u.usePathname}}),n.o(u,"useRouter")&&n.d(t,{useRouter:function(){return u.useRouter}})}},function(e){e.O(0,[415,5,460,293,528,744],function(){return e(e.s=3397)}),_N_E=e.O()}]);