(()=>{var e={};e.id=955,e.ids=[955],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},3036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),r(69157),r(77718),r(87824);var n=r(93282),a=r(5736),i=r(93906),s=r.n(i),o=r(36880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["lop-cua-toi",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69157)),"/home/user/studio/apps/web/src/app/lop-cua-toi/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,77718)),"/home/user/studio/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,87824,23)),"next/dist/client/components/not-found-error"]}],u=["/home/user/studio/apps/web/src/app/lop-cua-toi/page.tsx"],d="/lop-cua-toi/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/lop-cua-toi/page",pathname:"/lop-cua-toi",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9901:(e,t,r)=>{Promise.resolve().then(r.bind(r,37327))},37327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ea});var n=r(73227),a=r(23677),i=r.n(a),s=r(20649);r(21449),r(87030);var o=r(49543),l=r(11250),c=r(8313),u=r(79580),d=r(58680),p=r(68379),m=r(24534),h=r(92919),f=r.n(h),x=r(77357),y=r.n(x),v=r(4833),b=r.n(v),g=r(91126),j=r(23548),N=r(67113),w=r(73087),A=r(76039),S=r(91891),k=r(43833),P=r(71666),C=r(85765),O=r(6277),D=["type","layout","connectNulls","ref"],T=["key"];function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){Z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function L(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($=function(){return!!e})()}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}var z=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=n,r=[].concat(i),t=B(t),Z(e=function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,$()?Reflect.construct(t,r||[],B(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0,totalLength:0}),Z(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),Z(e,"getStrokeDasharray",function(t,r,a){var i=a.reduce(function(e,t){return e+t});if(!i)return e.generateSimpleStrokeDasharray(r,t);for(var s=t%i,o=r-t,l=[],c=0,u=0;c<a.length;u+=a[c],++c)if(u+a[c]>s){l=[].concat(L(a.slice(0,c)),[s-u]);break}var d=l.length%2==0?[0,o]:[o];return[].concat(L(n.repeat(a,Math.floor(t/i))),L(l),d).map(function(e){return"".concat(e,"px")}).join(", ")}),Z(e,"id",(0,k.EL)("recharts-line-")),Z(e,"pathRef",function(t){e.mainCurve=t}),Z(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),Z(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(n,e),t=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,a=r.xAxis,s=r.yAxis,o=r.layout,l=r.children,c=(0,P.NN)(l,S.W);if(!c)return null;var u=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:(0,O.F$)(e.payload,t)}};return i().createElement(w.m,{clipPath:e?"url(#clipPath-".concat(t,")"):null},c.map(function(e){return i().cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:a,yAxis:s,layout:o,dataPointFormatter:u})}))}},{key:"renderDots",value:function(e,t,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.dot,o=a.points,l=a.dataKey,c=(0,P.L6)(this.props,!1),u=(0,P.L6)(s,!0),d=o.map(function(e,t){var r=_(_(_({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:o});return n.renderDotItem(s,r)}),p={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(r,")"):null};return i().createElement(w.m,q({className:"recharts-line-dots",key:"dots"},p),d)}},{key:"renderCurveStatically",value:function(e,t,r,n){var a=this.props,s=a.type,o=a.layout,l=a.connectNulls,c=(a.ref,M(a,D)),u=_(_(_({},(0,P.L6)(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:s,layout:o,connectNulls:l});return i().createElement(j.H,q({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,s=n.strokeDasharray,o=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,u=n.animationEasing,d=n.animationId,p=n.animateNewValues,h=n.width,f=n.height,x=this.state,y=x.prevPoints,v=x.totalLength;return i().createElement(m.ZP,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i,o=n.t;if(y){var l=y.length/a.length,c=a.map(function(e,t){var r=Math.floor(t*l);if(y[r]){var n=y[r],a=(0,k.k4)(n.x,e.x),i=(0,k.k4)(n.y,e.y);return _(_({},e),{},{x:a(o),y:i(o)})}if(p){var s=(0,k.k4)(2*h,e.x),c=(0,k.k4)(f/2,e.y);return _(_({},e),{},{x:s(o),y:c(o)})}return _(_({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(c,e,t)}var u=(0,k.k4)(0,v)(o);if(s){var d="".concat(s).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});i=r.getStrokeDasharray(u,v,d)}else i=r.generateSimpleStrokeDasharray(v,u);return r.renderCurveStatically(a,e,t,{strokeDasharray:i})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,i=this.state,s=i.prevPoints,o=i.totalLength;return a&&n&&n.length&&(!s&&o>0||!b()(s,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,s=t.className,o=t.xAxis,l=t.yAxis,c=t.top,u=t.left,d=t.width,p=t.height,m=t.isAnimationActive,h=t.id;if(r||!a||!a.length)return null;var f=this.state.isAnimationFinished,x=1===a.length,v=(0,g.Z)("recharts-line",s),b=o&&o.allowDataOverflow,j=l&&l.allowDataOverflow,N=b||j,S=y()(h)?this.id:h,k=null!==(e=(0,P.L6)(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},C=k.r,O=k.strokeWidth,D=((0,P.jf)(n)?n:{}).clipDot,T=void 0===D||D,E=2*(void 0===C?3:C)+(void 0===O?2:O);return i().createElement(w.m,{className:v},b||j?i().createElement("defs",null,i().createElement("clipPath",{id:"clipPath-".concat(S)},i().createElement("rect",{x:b?u:u-d/2,y:j?c:c-p/2,width:b?d:2*d,height:j?p:2*p})),!T&&i().createElement("clipPath",{id:"clipPath-dots-".concat(S)},i().createElement("rect",{x:u-E/2,y:c-E/2,width:d+E,height:p+E}))):null,!x&&this.renderCurve(N,S),this.renderErrorBar(N,S),(x||n)&&this.renderDots(N,T,S),(!m||f)&&A.e.renderCallByParent(this.props,a))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(L(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(L(n),L(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(i().isValidElement(e))r=i().cloneElement(e,t);else if(f()(e))r=e(t);else{var n=t.key,a=M(t,T),s=(0,g.Z)("recharts-line-dot","boolean"!=typeof e?e.className:"");r=i().createElement(N.o,q({key:n},a,{className:s}))}return r}}],t&&I(n.prototype,t),r&&I(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(a.PureComponent);Z(z,"displayName","Line"),Z(z,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!C.x.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),Z(z,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,s=e.dataKey,o=e.bandSize,l=e.displayedData,c=e.offset,u=t.layout;return _({points:l.map(function(e,t){var l=(0,O.F$)(e,s);return"horizontal"===u?{x:(0,O.Hv)({axis:r,ticks:a,bandSize:o,entry:e,index:t}),y:y()(l)?null:n.scale(l),value:l,payload:e}:{x:y()(l)?null:r.scale(l),y:(0,O.Hv)({axis:n,ticks:i,bandSize:o,entry:e,index:t}),value:l,payload:e}}),layout:u},c)});var Y=r(68815),G=r(16875),W=r(9062),V=(0,p.z)({chartName:"LineChart",GraphicalChild:z,axisComponents:[{axisType:"xAxis",AxisComp:Y.K},{axisType:"yAxis",AxisComp:G.B}],formatAxisMap:W.t9}),U=r(91933),X=r(38587);function Q({items:e,placeholder:t,value:r,onChange:i}){let[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),u=(0,a.useRef)(null),d=(0,a.useRef)(null),p=(0,a.useMemo)(()=>{if(!l.trim())return e;let t=l.toLowerCase();return e.filter(e=>e.label.toLowerCase().includes(t)||(e.sub?.toLowerCase().includes(t)??!1))},[e,l]),m=(0,a.useMemo)(()=>e.find(e=>e.value===r)?.label||"",[e,r]);return(0,n.jsxs)("div",{className:"relative",ref:d,children:[(0,n.jsxs)("button",{type:"button",className:"w-full border rounded px-3 py-2 text-left bg-popover text-popover-foreground text-base h-[42px] flex items-center",onClick:()=>o(e=>!e),children:[n.jsx("span",{className:"truncate block",children:m||t}),n.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 opacity-60",children:"▾"})]}),s&&(0,n.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-popover border rounded shadow-lg max-h-72 overflow-auto",children:[n.jsx("div",{className:"sticky top-0 bg-popover p-2 border-b",children:n.jsx("input",{ref:u,value:l,onChange:e=>c(e.target.value),placeholder:"T\xecm kiếm nhanh...",className:"w-full border rounded px-3 py-2 text-base"})}),0===p.length?n.jsx("div",{className:"p-3 text-muted-foreground",children:"Kh\xf4ng c\xf3 kết quả"}):p.map(e=>(0,n.jsxs)("div",{className:"px-4 py-2 cursor-pointer hover:bg-accent text-popover-foreground",onClick:()=>{i(e.value),o(!1),c("")},children:[n.jsx("div",{className:"font-medium text-base",children:e.label}),e.sub&&n.jsx("div",{className:"text-sm text-muted-foreground",children:e.sub})]},e.value))]})]})}let J=()=>{let e=new Date;return new Date(8>e.getMonth()?e.getFullYear()-1:e.getFullYear(),8,8)},ee=()=>{let e=J(),t=[];for(let r=1;r<=35;r++){let n=new Date(e.getTime()+(r-1)*6048e5),a=new Date(n.getTime()+5184e5),i=e=>e<10?`0${e}`:`${e}`;t.push({value:String(r),label:`Tuần ${r} (${i(n.getDate())}/${i(n.getMonth()+1)} - ${i(a.getDate())}/${i(a.getMonth()+1)})`})}return t},et=e=>{let t=e instanceof Date?e:e?.toDate?e.toDate():new Date(e);if(isNaN(t.getTime()))return 1;let r=J();return Math.max(1,Math.min(35,Math.floor(Math.floor((t.setHours(0,0,0,0)-r.setHours(0,0,0,0))/864e5)/7)+1))},er=(e,t)=>{if(!e)return"N/A";let r=t.find(t=>t.code===e);return r?r.description:e},en=(e,t)=>{if(!e)return"N/A";let r=t.find(t=>t.id===e);return r?r.displayName:e};function ea(){let{user:e,isAdmin:t,isHomeroomTeacher:r}=(0,c.a)(),[i,p]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[f,x]=(0,a.useState)([]),[y,v]=(0,a.useState)([]),[b,g]=(0,a.useState)([]),[j,N]=(0,a.useState)(!0),[w,A]=(0,a.useState)(null),S=(0,a.useMemo)(ee,[]),[k,P]=(0,a.useState)(String(et(new Date))),[C,O]=(0,a.useState)("all"),[D,T]=(0,a.useState)("all"),E=(0,a.useMemo)(()=>[{value:"all",label:"Tất cả c\xe1c khối"},...Array.from(new Set(i.map(e=>e.gradeId).filter(Boolean))).sort().map(e=>{let t=String(e).split("_")[1]||e;return{value:e,label:`Khối ${t}`}})],[i]),M=(0,a.useMemo)(()=>{let e=i;return t||"all"===C||(e=i.filter(e=>e.gradeId===C)),[{value:"all",label:"-- Chọn lớp --"},...e.map(e=>({value:e.id,label:e.name}))]},[C,i,t]),q=(0,a.useMemo)(()=>i.find(e=>e.id===D),[D,i]),R=(0,a.useMemo)(()=>{let e=m.filter(e=>"merit"===e.type).reduce((e,t)=>e+(Number(t.pointsApplied)||0),0),t=m.filter(e=>"demerit"===e.type).reduce((e,t)=>e+Math.abs(Number(t.pointsApplied)||0),0),r=m.reduce((e,t)=>(t.ruleRef&&"demerit"===t.type&&(e[t.ruleRef]=(e[t.ruleRef]||0)+1),e),{});return{totalMerit:e,totalDemerit:t,totalPoints:1e3+e-t,commonError:er(Object.keys(r).reduce((e,t)=>r[e]>r[t]?e:t,"Kh\xf4ng c\xf3"),y)}},[m,y]),_=(0,a.useMemo)(()=>{if(!q||0===f.length)return[];let e=Array.from({length:35},(e,t)=>t+1).map(e=>{let t=f.find(t=>t.id===`week_${e}`),r=t?.scores?.[q.name];return{week:e,points:"number"==typeof r?r:null}}),t=1e3;return e.map(e=>(null!==e.points&&(t=e.points),{...e,points:e.points??t}))},[q,f]),L=(0,a.useMemo)(()=>{let e=_.map(e=>e.points).filter(e=>null!==e);if(!e.length)return{min:800,max:1200};let t=Math.min(...e),r=Math.max(...e),n=Math.max(20,Math.round((r-t)*.1));return{min:t-n,max:r+n}},[_]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{children:(0,n.jsxs)("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:"https://firebasestorage.googleapis.com/v0/b/app-quan-ly-hs.firebasestorage.app/o/Icon%2Ficon%20bi%C3%AA%CC%89u%20%C4%91%C3%B4%CC%80.gif?alt=media&token=efb96cab-ddfa-4169-892f-27073792ed36",alt:"Biểu đồ icon",className:"w-10 h-10"}),(0,n.jsxs)("div",{children:[n.jsx(u.ll,{className:"text-2xl",children:"Tổng Quan Lớp Học"}),n.jsx(u.SZ,{children:"Theo d\xf5i điểm số v\xe0 vi phạm qua từng tuần."})]})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[!t&&n.jsx("div",{className:"w-full sm:w-[180px]",children:n.jsx(Q,{items:E,placeholder:"Chọn khối",value:C,onChange:O})}),n.jsx("div",{className:`w-full ${t?"sm:w-[240px]":"sm:w-[180px]"}`,children:n.jsx(Q,{items:M,placeholder:"-- Chọn lớp --",value:D,onChange:T})}),n.jsx("div",{className:"w-full sm:w-[280px]",children:n.jsx(Q,{items:S,placeholder:"Chọn tuần",value:k,onChange:P})})]})]})}),"all"!==D&&n.jsx(u.aY,{className:"space-y-6",children:j?n.jsx("div",{className:"text-center py-10",children:"Đang tải dữ liệu..."}):w?n.jsx("div",{className:"text-center py-10 text-red-500",children:w}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(u.ll,{className:"text-sm font-medium",children:"Tổng điểm tuần"})}),n.jsx(u.aY,{children:n.jsx("div",{className:`text-2xl font-bold ${R.totalPoints>=1e3?"text-green-600":"text-red-600"}`,children:R.totalPoints})})]}),(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(u.ll,{className:"text-sm font-medium",children:"Điểm cộng"})}),n.jsx(u.aY,{children:(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",R.totalMerit]})})]}),(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(u.ll,{className:"text-sm font-medium",children:"Điểm trừ"})}),n.jsx(u.aY,{children:(0,n.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:["-",R.totalDemerit]})})]}),(0,n.jsxs)(u.Zb,{children:[n.jsx(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:n.jsx(u.ll,{className:"text-sm font-medium",children:"Lỗi phổ biến"})}),n.jsx(u.aY,{children:n.jsx("div",{className:"text-md font-bold truncate",title:R.commonError,children:R.commonError})})]})]}),(0,n.jsxs)("div",{className:"h-[250px] w-full",children:[n.jsx(u.ll,{className:"mb-4 text-xl",children:"Biểu đồ Lịch sử điểm"}),n.jsx(d.h,{children:(0,n.jsxs)(V,{data:_,margin:{top:5,right:20,left:-10,bottom:5},children:[n.jsx(U.q,{strokeDasharray:"3 3"}),n.jsx(Y.K,{dataKey:"week",tickFormatter:e=>`T${e}`}),n.jsx(G.B,{domain:[L.min,L.max],allowDecimals:!1}),n.jsx(X.u,{formatter:(e,t)=>null===e?["Chưa c\xf3 dữ liệu",t]:[`${e} điểm`,t],labelFormatter:e=>`Tuần ${e}`}),n.jsx(z,{connectNulls:!0,type:"monotone",dataKey:"points",stroke:"#8884d8",strokeWidth:2})]})})]})]})})]}),"all"!==D&&!w&&!j&&(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsxs)(u.ll,{children:["Danh S\xe1ch Vi Phạm (Tuần ",k,")"]}),(0,n.jsxs)(u.SZ,{children:["Lớp ",n.jsx("span",{className:"font-bold",children:q?.name})]})]}),n.jsx(u.aY,{children:0===m.length?n.jsx("div",{className:"text-center py-10 text-gray-500",children:"Kh\xf4ng c\xf3 vi phạm n\xe0o."}):n.jsx("div",{className:"overflow-x-auto rounded-md border",children:(0,n.jsxs)(o.iA,{children:[n.jsx(o.xD,{children:(0,n.jsxs)(o.SC,{children:[n.jsx(o.ss,{children:"STT"}),n.jsx(o.ss,{children:"Thời gian"}),n.jsx(o.ss,{children:"Họ v\xe0 t\xean"}),n.jsx(o.ss,{children:"Nội dung"}),n.jsx(o.ss,{className:"text-center",children:"Điểm"}),n.jsx(o.ss,{className:"text-right",children:"H\xe0nh động"})]})}),n.jsx(o.RM,{children:m.map((e,t)=>(0,n.jsxs)(o.SC,{children:[n.jsx(o.pj,{children:t+1}),n.jsx(o.pj,{children:e.recordDate?.seconds?new Date(1e3*e.recordDate.seconds).toLocaleString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(",",""):"N/A"}),n.jsx(o.pj,{className:"font-medium",children:e.studentName}),(0,n.jsxs)(o.pj,{children:[n.jsx("div",{children:er(e.ruleRef,y)}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["Người ghi nhận: ",en(e.supervisorRef,b)]})]}),n.jsx(o.pj,{className:"text-center font-semibold",children:(0,n.jsxs)("span",{className:(e.pointsApplied||0)>0?"text-green-600":0>(e.pointsApplied||0)?"text-red-600":"text-gray-500",children:[(e.pointsApplied||0)>0?"+":"",e.pointsApplied||0]})}),n.jsx(o.pj,{className:"text-right",children:e.studentId?n.jsx(s.default,{href:`/hoc-sinh/${e.studentId}`,passHref:!0,children:n.jsx(l.z,{variant:"outline",size:"sm",children:"Chi tiết"})}):n.jsx(l.z,{variant:"outline",size:"sm",disabled:!0,children:"Chi tiết"})})]},e.id))})]})})})]})]})}},79580:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>o,SZ:()=>c,Zb:()=>s,aY:()=>u,ll:()=>l});var n=r(73227),a=r(23677),i=r(18755);let s=a.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let o=a.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>n.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>n.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let u=a.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},49543:(e,t,r)=>{"use strict";r.d(t,{RM:()=>l,SC:()=>c,iA:()=>s,pj:()=>d,ss:()=>u,xD:()=>o});var n=r(73227),a=r(23677),i=r(18755);let s=a.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",e),...t})}));s.displayName="Table";let o=a.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=a.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let u=a.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableHead";let d=a.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},21449:(e,t,r)=>{"use strict";r.d(t,{db:()=>c,l2:()=>l});var n=r(27992),a=r(17761),i=r(87030),s=r(53377),o=r(57237);r(42353);let l=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAqGxdFqDGXOiiKP5cKFvPkNkmTdY4aByw",authDomain:"saodoapp--app-quan-ly-hs.asia-southeast1.hosted.app",projectId:"app-quan-ly-hs",storageBucket:"app-quan-ly-hs.firebasestorage.app",messagingSenderId:"771200825229",appId:"1:771200825229:web:bdffe0944b21edff21afc4"});(0,a.v0)(l);let c=(0,i.ad)(l);(0,s.cF)(l),(0,o.$C)(l)},69157:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(53189).createProxy)(String.raw`/home/user/studio/apps/web/src/app/lop-cua-toi/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[142,202,709,184],()=>r(3036));module.exports=n})();