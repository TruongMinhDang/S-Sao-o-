(()=>{var e={};e.id=613,e.ids=[613],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11600:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),a(9262),a(77718),a(87824);var t=a(93282),r=a(5736),i=a(93906),l=a.n(i),n=a(36880),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["nguoi-dung",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,9262)),"/home/user/studio/apps/web/src/app/nguoi-dung/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,77718)),"/home/user/studio/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,87824,23)),"next/dist/client/components/not-found-error"]}],c=["/home/user/studio/apps/web/src/app/nguoi-dung/page.tsx"],m="/nguoi-dung/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/nguoi-dung/page",pathname:"/nguoi-dung",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84065:(e,s,a)=>{Promise.resolve().then(a.bind(a,82584))},82584:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var t=a(73227),r=a(23677),i=a(21449),l=a(87030),n=a(11250),d=a(73956),o=a(49543),c=a(54686),m=a(63062),p=a(83414),u=a(29535),x=a(74871),h=a(8313);let f={giam_thi:"Gi\xe1m thị",homeroom_teacher:"Gi\xe1o vi\xean chủ nhiệm",hieu_truong:"Hiệu trưởng",pho_hieu_truong:"Ph\xf3 hiệu trưởng",nhan_vien_cntt:"Nh\xe2n vi\xean CNTT",admin:"Quản trị tối cao"},g=e=>f[e]||e;function j(){let{user:e,loading:s,isSuperAdmin:a}=(0,h.a)(),[f,j]=(0,r.useState)([]),[N,y]=(0,r.useState)(!0),[b,v]=(0,r.useState)(null),[w,_]=(0,r.useState)(""),[C,q]=(0,r.useState)(!1),[k,T]=(0,r.useState)(null),R=(0,r.useMemo)(()=>{if(!w)return f;let e=w.toLowerCase();return f.filter(s=>s.displayName?.toLowerCase().includes(e)||s.email?.toLowerCase().includes(e))},[f,w]),P=e=>{T(e),q(!0)},S=async()=>{if(k)try{if(!k.displayName||!k.email||!k.role){alert("Vui l\xf2ng nhập đầy đủ họ t\xean, email, v\xe0 vai tr\xf2.");return}let e={...k};if(k.id){let s=(0,l.JU)(i.db,"users",k.id);await (0,l.pl)(s,e,{merge:!0})}else await (0,l.ET)((0,l.hJ)(i.db,"users"),e);q(!1),T(null)}catch(e){console.error("Lỗi lưu người d\xf9ng:",e),alert("Đ\xe3 c\xf3 lỗi khi lưu th\xf4ng tin.")}};return s||N?t.jsx("div",{className:"p-8 text-center",children:"Đang tải..."}):a?(0,t.jsxs)("div",{className:"p-4 md:p-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:"https://firebasestorage.googleapis.com/v0/b/app-quan-ly-hs.firebasestorage.app/o/Icon%2Ficon%20ng%C6%B0%C6%A1%CC%80i%20du%CC%80ng.svg?alt=media&token=9d449ba6-b8ca-42c2-ad77-9624dd830a1e",alt:"Người d\xf9ng icon",className:"w-10 h-10"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-orange-600",children:"Quản L\xfd Người D\xf9ng"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Chỉ Quản trị vi\xean tối cao mới c\xf3 thể truy cập trang n\xe0y."})]})]}),a&&(0,t.jsxs)(n.z,{onClick:()=>{T({}),q(!0)},children:[t.jsx(u.Z,{className:"mr-2 h-4 w-4"}),"Th\xeam Người D\xf9ng Mới"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Danh S\xe1ch Người D\xf9ng"}),t.jsx("p",{className:"text-gray-500 mt-1",children:"Tất cả người d\xf9ng đ\xe3 đăng k\xfd trong hệ thống."})]}),(0,t.jsxs)("div",{className:"relative mt-4 md:mt-0",children:[t.jsx(x.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx(d.I,{placeholder:"T\xecm theo t\xean hoặc email...",value:w,onChange:e=>_(e.target.value),className:"pl-10 w-full md:w-80"})]})]}),t.jsx("div",{children:(0,t.jsxs)(o.iA,{children:[t.jsx(o.xD,{children:(0,t.jsxs)(o.SC,{children:[t.jsx(o.ss,{children:"T\xean hiển thị"}),t.jsx(o.ss,{children:"Email"}),t.jsx(o.ss,{children:"Vai tr\xf2"}),t.jsx(o.ss,{children:"Trạng th\xe1i"}),t.jsx(o.ss,{children:"Lớp Phụ Tr\xe1ch"}),t.jsx(o.ss,{className:"text-right",children:"H\xe0nh động"})]})}),t.jsx(o.RM,{children:b?t.jsx(o.SC,{children:t.jsx(o.pj,{colSpan:6,className:"text-center py-10 text-red-500",children:b})}):0===R.length?t.jsx(o.SC,{children:t.jsx(o.pj,{colSpan:6,className:"text-center py-10 text-gray-500",children:"Kh\xf4ng t\xecm thấy người d\xf9ng n\xe0o."})}):R.map(e=>(0,t.jsxs)(o.SC,{children:[t.jsx(o.pj,{className:"font-medium",children:e.displayName||"-"}),t.jsx(o.pj,{children:e.email||"-"}),t.jsx(o.pj,{children:e.role?g(e.role):"-"}),t.jsx(o.pj,{children:t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-700",children:"Chưa r\xf5"})}),t.jsx(o.pj,{children:e.assignedClasses?.join(", ")||"-"}),t.jsx(o.pj,{className:"text-right",children:a&&t.jsx(n.z,{variant:"outline",size:"sm",onClick:()=>P(e),children:"Sửa"})})]},e.id))})]})})]}),t.jsx(c.Vq,{open:C,onOpenChange:q,children:(0,t.jsxs)(c.cZ,{className:"bg-white",children:[t.jsx(c.fK,{children:t.jsx(c.$N,{children:k?.id?"Sửa Th\xf4ng Tin Người D\xf9ng":"Th\xeam Người D\xf9ng Mới"})}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(p._,{htmlFor:"displayName",className:"text-right",children:"T\xean hiển thị"}),t.jsx(d.I,{id:"displayName",value:k?.displayName||"",onChange:e=>T({...k,displayName:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(p._,{htmlFor:"email",className:"text-right",children:"Email"}),t.jsx(d.I,{id:"email",type:"email",value:k?.email||"",onChange:e=>T({...k,email:e.target.value}),className:"col-span-3"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(p._,{htmlFor:"role",className:"text-right",children:"Vai tr\xf2"}),(0,t.jsxs)(m.Ph,{value:k?.role||"",onValueChange:e=>T({...k,role:e}),children:[t.jsx(m.i4,{className:"col-span-3",children:t.jsx(m.ki,{placeholder:"Chọn vai tr\xf2"})}),(0,t.jsxs)(m.Bw,{children:[t.jsx(m.Ql,{value:"homeroom_teacher",children:"Gi\xe1o vi\xean chủ nhiệm"}),t.jsx(m.Ql,{value:"giam_thi",children:"Gi\xe1m thị"}),t.jsx(m.Ql,{value:"hieu_truong",children:"Hiệu trưởng"}),t.jsx(m.Ql,{value:"pho_hieu_truong",children:"Ph\xf3 hiệu trưởng"}),t.jsx(m.Ql,{value:"nhan_vien_cntt",children:"Nh\xe2n vi\xean CNTT"}),t.jsx(m.Ql,{value:"admin",children:"Quản trị tối cao"})]})]})]}),k?.role==="homeroom_teacher"&&(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[t.jsx(p._,{htmlFor:"assignedClasses",className:"text-right",children:"Lớp phụ tr\xe1ch"}),t.jsx(d.I,{id:"assignedClasses",value:Array.isArray(k?.assignedClasses)?k.assignedClasses.join(", "):k?.assignedClasses||"",onChange:e=>T({...k,assignedClasses:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),className:"col-span-3",placeholder:"V\xed dụ: class_7_1, class_7_2"})]})]}),(0,t.jsxs)(c.cN,{children:[t.jsx(c.GG,{asChild:!0,children:t.jsx(n.z,{variant:"outline",children:"Hủy"})}),t.jsx(n.z,{onClick:S,children:"Lưu"})]})]})})]}):(0,t.jsxs)("div",{className:"p-8 text-center text-red-600 bg-red-50 rounded-lg",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Truy cập bị từ chối"}),t.jsx("p",{children:"Bạn kh\xf4ng c\xf3 quyền truy cập trang n\xe0y."})]})}},54686:(e,s,a)=>{"use strict";a.d(s,{$N:()=>f,Be:()=>g,GG:()=>m,Vq:()=>d,cN:()=>h,cZ:()=>u,fK:()=>x,hg:()=>o});var t=a(73227),r=a(23677),i=a(11646),l=a(77587),n=a(18755);let d=i.fC,o=i.xz,c=i.h_,m=i.x8,p=r.forwardRef(({className:e,...s},a)=>t.jsx(i.aV,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));p.displayName=i.aV.displayName;let u=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(c,{children:[t.jsx(p,{}),(0,t.jsxs)(i.VY,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(l.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=i.VY.displayName;let x=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});x.displayName="DialogHeader";let h=({className:e,...s})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});h.displayName="DialogFooter";let f=r.forwardRef(({className:e,...s},a)=>t.jsx(i.Dx,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));f.displayName=i.Dx.displayName;let g=r.forwardRef(({className:e,...s},a)=>t.jsx(i.dk,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));g.displayName=i.dk.displayName},73956:(e,s,a)=>{"use strict";a.d(s,{I:()=>l});var t=a(73227),r=a(23677),i=a(18755);let l=r.forwardRef(({className:e,type:s,...a},r)=>t.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));l.displayName="Input"},83414:(e,s,a)=>{"use strict";a.d(s,{_:()=>o});var t=a(73227),r=a(23677),i=a(97473),l=a(31086),n=a(18755);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>t.jsx(i.f,{ref:a,className:(0,n.cn)(d(),e),...s}));o.displayName=i.f.displayName},63062:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>h,Ph:()=>c,Ql:()=>f,i4:()=>p,ki:()=>m});var t=a(73227),r=a(23677),i=a(98682),l=a(65327),n=a(87090),d=a(56942),o=a(18755);let c=i.fC;i.ZA;let m=i.B4,p=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(i.xz,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,t.jsx(i.JO,{asChild:!0,children:t.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=i.xz.displayName;let u=r.forwardRef(({className:e,...s},a)=>t.jsx(i.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(n.Z,{className:"h-4 w-4"})}));u.displayName=i.u_.displayName;let x=r.forwardRef(({className:e,...s},a)=>t.jsx(i.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:t.jsx(l.Z,{className:"h-4 w-4"})}));x.displayName=i.$G.displayName;let h=r.forwardRef(({className:e,children:s,position:a="popper",...r},l)=>t.jsx(i.h_,{children:(0,t.jsxs)(i.VY,{ref:l,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[t.jsx(u,{}),t.jsx(i.l_,{className:(0,o.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),t.jsx(x,{})]})}));h.displayName=i.VY.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(i.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.__.displayName;let f=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(i.ck,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm text-foreground outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(i.wU,{children:t.jsx(d.Z,{className:"h-4 w-4"})})}),t.jsx(i.eT,{children:s})]}));f.displayName=i.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(i.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.Z0.displayName},49543:(e,s,a)=>{"use strict";a.d(s,{RM:()=>d,SC:()=>o,iA:()=>l,pj:()=>m,ss:()=>c,xD:()=>n});var t=a(73227),r=a(23677),i=a(18755);let l=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));l.displayName="Table";let n=r.forwardRef(({className:e,...s},a)=>t.jsx("thead",{ref:a,className:(0,i.cn)("[&_tr]:border-b",e),...s}));n.displayName="TableHeader";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("tbody",{ref:a,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));d.displayName="TableBody",r.forwardRef(({className:e,...s},a)=>t.jsx("tfoot",{ref:a,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("tr",{ref:a,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("th",{ref:a,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...s},a)=>t.jsx("td",{ref:a,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},a)=>t.jsx("caption",{ref:a,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},21449:(e,s,a)=>{"use strict";a.d(s,{db:()=>o,l2:()=>d});var t=a(27992),r=a(17761),i=a(87030),l=a(53377),n=a(57237);a(42353);let d=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyAqGxdFqDGXOiiKP5cKFvPkNkmTdY4aByw",authDomain:"saodoapp--app-quan-ly-hs.asia-southeast1.hosted.app",projectId:"app-quan-ly-hs",storageBucket:"app-quan-ly-hs.firebasestorage.app",messagingSenderId:"771200825229",appId:"1:771200825229:web:bdffe0944b21edff21afc4"});(0,r.v0)(d);let o=(0,i.ad)(d);(0,l.cF)(d),(0,n.$C)(d)},74871:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(24583).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9262:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(53189).createProxy)(String.raw`/home/user/studio/apps/web/src/app/nguoi-dung/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[142,202,154,737,184],()=>a(11600));module.exports=t})();