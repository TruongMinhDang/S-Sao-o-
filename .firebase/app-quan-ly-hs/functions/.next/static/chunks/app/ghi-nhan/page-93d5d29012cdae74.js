(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{79979:function(e,t,a){Promise.resolve().then(a.bind(a,20004))},20004:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(27573),r=a(7653),s=a(21897),o=a(16851),d=a(29147);a(50466);var l=a(44595);l.fC,l.xz,r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:s=4,...o}=e;return(0,n.jsx)(l.h_,{children:(0,n.jsx)(l.VY,{ref:t,align:r,sideOffset:s,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})}).displayName=l.VY.displayName;var i=a(37618),c=a(95731);a(29324),r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.mY,{ref:t,className:(0,d.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...r})}).displayName=i.mY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,n.jsx)(c.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(i.mY.Input,{ref:t,className:(0,d.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...r})]})}).displayName=i.mY.Input.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.mY.List,{ref:t,className:(0,d.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...r})}).displayName=i.mY.List.displayName,r.forwardRef((e,t)=>(0,n.jsx)(i.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e})).displayName=i.mY.Empty.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.mY.Group,{ref:t,className:(0,d.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...r})}).displayName=i.mY.Group.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.mY.Separator,{ref:t,className:(0,d.cn)("-mx-1 h-px bg-border",a),...r})}).displayName=i.mY.Separator.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(i.mY.Item,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",a),...r})}).displayName=i.mY.Item.displayName;let u=new Set(["D06","C11"]),f="special:",p="".concat(f,"tap-the-lop"),m="".concat(f,"lop-truong"),g="".concat(f,"to-truc");function h(){let[e,t]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null),[i,c]=(0,r.useState)([]),[f,h]=(0,r.useState)([]),[x,b]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[N,w]=(0,r.useState)(""),[j,k]=(0,r.useState)(""),[S,_]=(0,r.useState)(""),[Y,R]=(0,r.useState)(""),[D,z]=(0,r.useState)(new Date),[A,I]=(0,r.useState)(""),[C,T]=(0,r.useState)(""),[E,M]=(0,r.useState)(1);return((0,r.useEffect)(()=>{let e=(0,s.cf)((0,s.hJ)(o.db,"students"),e=>{c(e.docs.map(e=>({id:e.id,...e.data()}))),t(!1)},()=>l("Kh\xf4ng thể tải danh s\xe1ch học sinh.")),a=(0,s.cf)((0,s.hJ)(o.db,"rules"),e=>h(e.docs.map(e=>({id:e.id,...e.data()}))),()=>l("Kh\xf4ng thể tải danh s\xe1ch quy định.")),n=(0,s.cf)((0,s.IO)((0,s.hJ)(o.db,"records"),(0,s.Xo)("createdAt","desc")),e=>b(e.docs.map(e=>({id:e.id,...e.data()}))),()=>l("Kh\xf4ng thể tải c\xe1c ghi nhận đ\xe3 lưu."));return()=>{e(),a(),n()}},[]),(0,r.useMemo)(d.Es,[]),(0,r.useMemo)(()=>[{value:"",label:"Tất cả c\xe1c khối"},...Array.from(new Set(i.map(e=>(0,d.ap)(e.classRef)).filter(Boolean))).sort((e,t)=>parseInt(e)-parseInt(t)).map(e=>({value:e,label:"Khối ".concat(e)}))],[i]),(0,r.useMemo)(()=>{let e=new Intl.Collator("vi",{numeric:!0,sensitivity:"base"}),t=Array.from(new Set(i.map(e=>e.classRef).filter(Boolean)));return j&&(t=t.filter(e=>(0,d.ap)(e)===j)),t.sort(e.compare),[{value:"",label:"Tất cả c\xe1c lớp"},...t.map(e=>({value:e,label:(0,d.Hg)(e)}))]},[i,j]),(0,r.useMemo)(()=>{let e=i.filter(e=>!S||e.classRef===S).map(e=>({value:e.id,label:e.fullName,sub:"".concat((0,d.Hg)(e.classRef)," - ").concat(e.schoolId)})).sort((e,t)=>e.label.localeCompare(t.label,"vi"));if(!S)return e;let t=(0,d.Hg)(S);return[{value:p,label:"Tập thể lớp ".concat(t),sub:"\xc1p dụng cho cả lớp"},{value:m,label:"Lớp trưởng ".concat(t),sub:"\xc1p dụng cho lớp trưởng"},{value:g,label:"Tổ trực ".concat(t),sub:"\xc1p dụng cho tổ trực"},...e]},[i,S]),(0,r.useMemo)(()=>f.map(e=>({value:e.code,label:"".concat(e.code," — ").concat(e.description),sub:"".concat(e.points," điểm")})),[f]),(0,r.useMemo)(()=>u.has(C),[C]),e)?(0,n.jsx)("div",{className:"p-8 text-center text-xl",children:"Đang tải dữ liệu, vui l\xf2ng chờ..."}):a?(0,n.jsx)("div",{className:"p-8 text-center text-red-600 bg-red-50 rounded-lg",children:a}):(0,n.jsx)("div",{className:"p-4 md:p-6 lg:p-8 max-w-7xl mx-auto space-y-6"})}},50466:function(e,t,a){"use strict";a.d(t,{z:function(){return i}});var n=a(27573),r=a(7653),s=a(8828),o=a(49289),d=a(29147);let l=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-blue-700",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=r.forwardRef((e,t)=>{let{className:a,variant:r,size:o,asChild:i=!1,...c}=e,u=i?s.g7:"button";return(0,n.jsx)(u,{className:(0,d.cn)(l({variant:r,size:o,className:a})),ref:t,...c})});i.displayName="Button"},29324:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return x},GG:function(){return u},Vq:function(){return l},cN:function(){return g},cZ:function(){return p},fK:function(){return m},hg:function(){return i}});var n=a(27573),r=a(7653),s=a(57164),o=a(10269),d=a(29147);let l=s.fC,i=s.xz,c=s.h_,u=s.x8,f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});f.displayName=s.aV.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,n.jsxs)(c,{children:[(0,n.jsx)(f,{}),(0,n.jsxs)(s.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l,children:[r,(0,n.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=s.VY.displayName;let m=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let g=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=s.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=s.dk.displayName},16851:function(e,t,a){"use strict";a.d(t,{db:function(){return c},l2:function(){return i}});var n=a(90791),r=a(78022),s=a(21897),o=a(8774),d=a(11582),l=a(17865);let i=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)({apiKey:"AIzaSyAqGxdFqDGXOiiKP5cKFvPkNkmTdY4aByw",authDomain:"saodoapp--app-quan-ly-hs.asia-southeast1.hosted.app",projectId:"app-quan-ly-hs",storageBucket:"app-quan-ly-hs.firebasestorage.app",messagingSenderId:"771200825229",appId:"1:771200825229:web:bdffe0944b21edff21afc4"});try{(0,l.yu)(i,{provider:new l.o4("6Lf-0_gpAAAAAB6_ZgV7e_FvX8xw_9x3X_yYjW4C"),isTokenAutoRefreshEnabled:!0})}catch(e){console.error("Lỗi khi khởi tạo App Check:",e)}(0,r.v0)(i);let c=(0,s.ad)(i);(0,o.cF)(i),(0,d.$C)(i)},29147:function(e,t,a){"use strict";a.d(t,{Es:function(){return l},Hg:function(){return c},ap:function(){return i},cn:function(){return s}});var n=a(10607),r=a(25579);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}let o=new Date(2025,8,8),d=e=>{let t=new Date(e);return t.setHours(0,0,0,0),t},l=()=>{let e=[{value:"",label:"Tất cả c\xe1c tuần"}],t=e=>e<10?"0".concat(e):"".concat(e);for(let a=1;a<=35;a++){let n=new Date(d(o).getTime()+(a-1)*6048e5),r=new Date(n.getTime()+5184e5);e.push({value:String(a),label:"Tuần ".concat(a," (").concat(t(n.getDate()),"/").concat(t(n.getMonth()+1)," - ").concat(t(r.getDate()),"/").concat(t(r.getMonth()+1),")")})}return e},i=e=>{if(!e)return"";let t=e.match(/(?:class_)?(\d+)/);return t?t[1]:""},c=e=>e&&e.startsWith("class_")?e.substring(6).replace(/_/g,"/"):e}},function(e){e.O(0,[6415,5117,2997,1661,6951,9445,792,7374,1293,1528,1744],function(){return e(e.s=79979)}),_N_E=e.O()}]);