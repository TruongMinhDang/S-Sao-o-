(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5361],{59081:function(e,t,r){Promise.resolve().then(r.bind(r,43635))},43635:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(27573),a=r(7653),i=r(21897),s=r(66356),l=r(78022);let d=(0,r(2389).Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var c=r(88146);function E(){let[e,t]=(0,a.useState)(null),[r,E]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,l.Aj)(s.I,e=>{var r;return t(null!==(r=null==e?void 0:e.uid)&&void 0!==r?r:null)});return()=>e()},[]),(0,a.useEffect)(()=>{if(!e){E([]);return}let t=(0,i.IO)((0,i.hJ)(s.db,"notifications"),(0,i.ar)("recipients","array-contains",e),(0,i.Xo)("createdAt","desc")),r=(0,i.cf)(t,e=>{E(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>r()},[e]);let _=async t=>{e&&await (0,i.r7)((0,i.JU)(s.db,"notifications",t),{readBy:(0,i.vr)(e)})},o=async()=>{e&&await Promise.all(r.filter(t=>{var r;return!(null!==(r=t.readBy)&&void 0!==r?r:[]).includes(e)}).map(t=>(0,i.r7)((0,i.JU)(s.db,"notifications",t.id),{readBy:(0,i.vr)(e)})))};return(0,n.jsxs)("div",{className:"mx-auto max-w-3xl space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"bg-gradient-to-r from-[#ff7a18] to-[#af002d] bg-clip-text text-2xl font-extrabold text-transparent",children:"Th\xf4ng b\xe1o"}),(0,n.jsxs)("button",{onClick:o,className:"inline-flex items-center gap-2 rounded-md border px-3 py-1.5 text-sm hover:bg-muted",children:[(0,n.jsx)(d,{className:"h-4 w-4"}),"Đ\xe1nh dấu tất cả đ\xe3 đọc"]})]}),(0,n.jsxs)("div",{className:"divide-y rounded-xl border",children:[r.map(t=>{var r;let a=e&&!(null!==(r=t.readBy)&&void 0!==r?r:[]).includes(e);return(0,n.jsxs)("div",{className:"flex items-start gap-3 p-4",children:[(0,n.jsx)("div",{className:"mt-1 h-2 w-2 flex-shrink-0 rounded-full",style:{background:a?"#ff7a18":"transparent"},title:a?"Chưa đọc":"Đ\xe3 đọc"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium",children:t.title}),t.body&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:t.body})]}),a&&(0,n.jsxs)("button",{onClick:()=>_(t.id),className:"inline-flex items-center gap-1 rounded-md border px-2 py-1 text-xs hover:bg-muted",children:[(0,n.jsx)(d,{className:"h-4 w-4"}),"Đ\xe3 đọc"]})]},t.id)}),0===r.length&&(0,n.jsxs)("div",{className:"p-8 text-center text-sm text-muted-foreground",children:["Chưa c\xf3 th\xf4ng b\xe1o."," ",(0,n.jsx)(c.default,{href:"/",className:"text-primary hover:underline",children:"Về trang chủ"})]})]})]})}},66356:function(e,t,r){"use strict";r.d(t,{l:function(){return _},I:function(){return u},db:function(){return o}});var n=r(90791),a=r(21897),i=r(78022),s=r(17865),l=r(68571);function d(e){let t=l.env[e];if(!t||""===t.trim())throw Error("Thiếu biến m\xf4i trường ".concat(e,". Kiểm tra .env.local / secrets."));return t}let c={NEXT_PUBLIC_FIREBASE_API_KEY:d("NEXT_PUBLIC_FIREBASE_API_KEY"),NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN:d("NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN"),NEXT_PUBLIC_FIREBASE_PROJECT_ID:d("NEXT_PUBLIC_FIREBASE_PROJECT_ID"),NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET:d("NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET"),NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID:d("NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID"),NEXT_PUBLIC_FIREBASE_APP_ID:d("NEXT_PUBLIC_FIREBASE_APP_ID"),NEXT_PUBLIC_RECAPTCHA_SITE_KEY:d("NEXT_PUBLIC_RECAPTCHA_SITE_KEY")},E={apiKey:c.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.NEXT_PUBLIC_FIREBASE_APP_ID},_=(0,n.C6)().length?(0,n.Mq)():(0,n.ZF)(E);{let e=globalThis;e.__firebaseAppCheckInitialized||(e.__firebaseAppCheckInitialized=!0,(0,s.yu)(_,{provider:new s.o4(c.NEXT_PUBLIC_RECAPTCHA_SITE_KEY),isTokenAutoRefreshEnabled:!0}))}let o=(0,a.ad)(_),u=(0,i.v0)(_)},2389:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(7653);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:E,iconNode:_,...o}=e;return(0,n.createElement)("svg",{ref:t,...s,width:a,height:a,stroke:r,strokeWidth:d?24*Number(l)/Number(a):l,className:i("lucide",c),...o},[..._.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(E)?E:[E]])}),d=(e,t)=>{let r=(0,n.forwardRef)((r,s)=>{let{className:d,...c}=r;return(0,n.createElement)(l,{ref:s,iconNode:t,className:i("lucide-".concat(a(e)),d),...c})});return r.displayName="".concat(e),r}}},function(e){e.O(0,[6415,5117,2997,8146,1293,1528,1744],function(){return e(e.s=59081)}),_N_E=e.O()}]);